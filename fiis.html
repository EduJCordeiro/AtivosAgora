<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="bacon.js"></script>
    <meta charset="utf-8">
    <title>JS Bin</title>
</head>
<style>
    #item {
        width: 100px;
        height: 100px;
        background: red;
        position: absolute;
    }

    #result {
        margin-top: 20px;
        float: right;
    }


</style>
<body>
<div id="item"></div>
<div id="result"></div>
</body>
</html>
<script>

    var btn = $('#item');
    var downs = btn.asEventStream('mousedown');
    var ups = $(document).asEventStream('mouseup').map('clicks');
    var clickOrHold = downs.flatMapLatest(function() {
        return Bacon.later(300, 'hold').merge(ups).take(1);
    });

    var dragging = clickOrHold.filter(function(val) {return val == 'hold';} )
        .merge(ups.map(false))
        .toProperty(false);

    // $(document).asEventStream('mousemove').filter(dragging).onValue(function(mmove) {
    //     mmove.preventDefault();
    //     btn.offset({left: mmove.clientX, top: mmove.clientY});
    // });

    clickOrHold.onValue($('#result'), 'append');


</script>